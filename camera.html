<html>
<head>
    <meta charset="UTF-8">
    <title>camera</title>
    <style>
    body {
        font-size: 20px;}
    </style>
</head>
<body>
<p><a href="index.html">Mergi înapoi la pagina principală</a></p>
<h1 align="center">Camerele Digitale sunt Dispozitive Periferice de Intrare folosite pentru a Captura Imagini și Video</h1>
<dl>
    <dt>Istoria Camerei Digitale</dt>
    <dd>
        <ul>
            <li>Prima camera digitala a fost dezovoltata in 1975.</li>
            <img src="https://th.bing.com/th/id/OIP.5U_b9zZB9dI9tBk8ZkrdCQHaFj?rs=1&pid=ImgDetMain" width="300">
            <li>Camerele digitale moderne au devenit populare la începutul anilor 2000.</li>
            <img src="https://th.bing.com/th/id/OIP.aV9j4jqtd1bhcPAQxmmFnwHaEK?rs=1&pid=ImgDetMain" width="300">
        </ul>
    </dd>
    <dt>Tipuri de Camere Digitale</dt>
    <dd>
        <ul>
            <li>Camerele DSLR folosesc un sistem de oglinzi pentru a redirecționa lumina din obiectiv către senzor.</li>
            <img src="https://th.bing.com/th/id/OIP.0lxRsfgkqLRRKOtUJqEjHQHaHa?rs=1&pid=ImgDetMain" width="300">
            <li>Camerele mirrorless nu au sistem de oglinzi, ceea ce le face mai compacte și mai ușoare.</li>
            <img src="https://www.bhphotovideo.com/images/images1500x1500/canon_1725c001_eos_m6_mirrorless_camera_1318780.jpg" width="300">
        </ul>
    </dd>
</dl>
<video id="camera" width="640" height="480" autoplay></video>
<button id="startRecord">Începe Înregistrarea</button>
<button id="stopRecord" disabled>Oprire Înregistrare</button>
<button id="download" disabled>Descarcă Video</button>

<script>
  let cameraStream = null;
  let mediaRecorder = null;
  let videoChunks = [];
  let downloadLink = document.createElement('a');

  document.getElementById('startRecord').addEventListener('click', function() {
    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(function(stream) {
        cameraStream = stream;
        document.getElementById('camera').srcObject = stream;
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.ondataavailable = function(e) {
          videoChunks.push(e.data);
        };
        mediaRecorder.start();
        document.getElementById('stopRecord').disabled = false;
        document.getElementById('startRecord').disabled = true;
      }).catch(function(err) {
        console.error("Eroare la accesarea camerei: ", err);
      });
  });

  document.getElementById('stopRecord').addEventListener('click', function() {
    mediaRecorder.stop();
    document.getElementById('stopRecord').disabled = true;
    document.getElementById('download').disabled = false;
  });

  document.getElementById('download').addEventListener('click', function() {
    const videoBlob = new Blob(videoChunks, { type: 'video/mp4' });
    const videoUrl = URL.createObjectURL(videoBlob);
    downloadLink.href = videoUrl;
    downloadLink.download = 'inregistrare.mp4';
    downloadLink.click();
  });

  window.onunload = function() {
    if (cameraStream) {
      cameraStream.getTracks().forEach(track => track.stop());
    }
  };
</script>

</body>
</html>